[
  {
    "objectID": "results_hardik.html",
    "href": "results_hardik.html",
    "title": "3  Results",
    "section": "",
    "text": "3.1 Which complaint types are most common in NYC?\nThere were a unique total of 300 complaint types reported in the dataset. The complaint were bucketed into the following categories for better analysis: Noise Related, Heat/Water/Gas Issues, Buildings and Housing, Sanitation and Waste, Street and Traffic Conditions, Public Safety / Crime / Quality of Life, Vehicle and Parking, Utilities and Power, Pests and Animals, Others / Miscellaneous.\nCode\ndf_clean_final &lt;- readRDS(\"df_clean_final.rds\")\ncomplaint_category_mapping &lt;- list(\n  \"Noise Related\" = c(\n    \"Noise - Residential\", \"Noise - Street/Sidewalk\", \"Noise - Commercial\",\n    \"Noise\", \"Noise - Vehicle\", \"Noise - Helicopter\", \"Noise - Park\",\n    \"Noise - House of Worship\"\n  ),\n  \n  \"Heat/Water/Gas Issues\" = c(\n    \"HEAT/HOT WATER\", \"Water System\", \"WATER LEAK\", \"PLUMBING\",\n    \"Water Leak\", \"Drinking Water\", \"Water Quality\", \"Water Maintenance\",\n    \"Water Drainage\", \"Drinking Water General\", \"Drinking Water Tank\",\n    \"Drinking Water Conservation\", \"Bottled Water\", \"DEP Sidewalk Condition\",\n    \"Non-Residential Heat\", \"Heat/Hot Water\"\n  ),\n  \n  \"Buildings and Housing\" = c(\n    \"PAINT/PLASTER\", \"DOOR/WINDOW\", \"FLOORING/STAIRS\", \"APPLIANCE\",\n    \"Elevator\", \"Lead\", \"SAFETY\", \"Indoor Air Quality\", \"Plumbing\",\n    \"Boilers\", \"Electrical\", \"ELEVATOR\", \"Asbestos\", \"Paint/Plaster\",\n    \"Door/Window\", \"OUTSIDE BUILDING\", \"Wood Pile\", \"Mold\",\n    \"Flooring/Stairs\", \"Appliance\", \"Scaffold Safety\", \"Electric\",\n    \"Unstable Building\", \"Window Guard\", \"Cooling Tower\", \"Peeling Paint\",\n    \"Facade Insp Safety Pgm\", \"Outside Building\"\n  ),\n  \n  \"Sanitation and Waste\" = c(\n    \"UNSANITARY CONDITION\", \"Dirty Condition\", \"Missed Collection\",\n    \"Residential Disposal Complaint\", \"Litter Basket Request\",\n    \"Commercial Disposal Complaint\", \"Litter Basket Complaint\",\n    \"Sanitation Worker or Vehicle Complaint\", \"Dumpster Complaint\",\n    \"Industrial Waste\", \"Seasonal Collection\", \"Institution Disposal Complaint\",\n    \"Transfer Station Complaint\", \"DSNY Internal\"\n  ),\n  \n  \"Street and Traffic Conditions\" = c(\n    \"Street Condition\", \"Traffic Signal Condition\", \"Street Light Condition\",\n    \"Sidewalk Condition\", \"Curb Condition\", \"Street Sign - Damaged\",\n    \"Street Sign - Missing\", \"Street Sign - Dangling\", \"Highway Condition\",\n    \"Highway Sign - Damaged\", \"Highway Sign - Missing\", \"Highway Sign - Dangling\",\n    \"Bridge Condition\", \"Tunnel Condition\", \"DEP Highway Condition\",\n    \"DEP Street Condition\"\n  ),\n  \n  \"Public Safety / Crime / Quality of Life\" = c(\n    \"Homeless Person Assistance\", \"Encampment\", \"Non-Emergency Police Matter\",\n    \"Drug Activity\", \"Graffiti\", \"Illegal Fireworks\", \"Panhandling\",\n    \"Animal-Abuse\", \"Violation of Park Rules\", \"Illegal Posting\",\n    \"Hazardous Materials\", \"Smoking\", \"Unleashed Dog\", \"Urinating in Public\",\n    \"Disorderly Youth\", \"Squeegee\", \"Quality of Life\", \"Face Covering Violation\"\n  ),\n  \n  \"Vehicle and Parking\" = c(\n    \"Illegal Parking\", \"Blocked Driveway\", \"Abandoned Vehicle\",\n    \"Derelict Vehicles\", \"Broken Parking Meter\", \"Municipal Parking Facility\"\n  ),\n  \n  \"Utilities and Power\" = c(\n    \"ELECTRIC\", \"Sewer\", \"Root/Sewer/Sidewalk Condition\", \"Radioactive Material\",\n    \"X-Ray Machine/Equipment\", \"Oil or Gas Spill\"\n  ),\n  \n  \"Pests and Animals\" = c(\n    \"Rodent\", \"Animal in a Park\", \"Unsanitary Pigeon Condition\",\n    \"Harboring Bees/Wasps\", \"Illegal Animal Kept as Pet\", \"Mosquitoes\",\n    \"Pet Shop\", \"Poison Ivy\", \"Illegal Animal Sold\", \"Unsanitary Animal Facility\",\n    \"Animal Facility - No Permit\", \"Unlicensed Dog\", \"Unsanitary Animal Pvt Property\"\n  ),\n  \n  \"Others / Miscellaneous\" = c(\n    \"General Construction/Plumbing\", \"Illegal Dumping\", \"GENERAL\",\n    \"Damaged Tree\", \"Maintenance or Facility\", \"New Tree Request\",\n    \"For Hire Vehicle Complaint\", \"Overgrown Tree/Branches\", \"Consumer Complaint\",\n    \"Vendor Enforcement\", \"Building/Use\", \"Obstruction\", \"Air Quality\",\n    \"Dead/Dying Tree\", \"Dead Animal\", \"Street Sweeping Complaint\",\n    \"Taxi Complaint\", \"Lost Property\", \"Outdoor Dining\",\n    \"Real Time Enforcement\", \"Mobile Food Vendor\", \"Bike/Roller/Skate\",\n    \"Chronic\", \"Special Projects Inspection Team (SPIT)\", \"Illegal Tree Damage\",\n    \"Electronics Waste Appointment\", \"Emergency Response Team (ERT)\",\n    \"Food Poisoning\", \"Smoking or Vaping\", \"Day Care\", \"Standing Water\",\n    \"Investigations and Discipline (IAD)\", \"Remaining Taxi Report\",\n    \"E-Scooter\", \"BEST/Site Safety\", \"Indoor Sewage\", \"For Hire Vehicle Report\",\n    \"Uprooted Stump\", \"Green Taxi Complaint\", \"Ferry Inquiry\", \"Ferry Complaint\",\n    \"Beach/Pool/Sauna Complaint\", \"Tattooing\", \"Plant\", \"Bus Stop Shelter Placement\",\n    \"LinkNYC\", \"Bus Stop Shelter Complaint\", \"Posting Advertisement\",\n    \"Taxi Compliment\", \"AHV Inspection Unit\", \"Adopt-A-Basket\",\n    \"Cranes and Derricks\", \"Recycling Basket Complaint\", \"Found Property\",\n    \"Incorrect Data\", \"Bike Rack\", \"Special Natural Area District (SNAD)\",\n    \"Public Toilet\", \"Dept of Investigations\", \"Lifeguard\", \"Special Operations\",\n    \"Dispatched Taxi Complaint\", \"Boiler\", \"Bench\", \"Building Condition\",\n    \"Taxi Licensee Complaint\", \"Retailer Complaint\", \"Calorie Labeling\",\n    \"ZTESTINT\", \"Public Payphone Complaint\", \"FHV Licensee Complaint\",\n    \"Wayfinding SNW\", \"Leaning\", \"Bar\", \"Building Marshal's Office\",\n    \"Building Marshals office\", \"DOB Posted Notice or Order\",\n    \"Construction Safety Enforcement\", \"Tanning\", \"Executive Inspections\",\n    \"Internal\", \"Code\", \"Private School\", \"Vaccine Mandate Non-Compliance\",\n    \"Dispatched Taxi Compliment\", \"SRDE\", \"Stalled Sites\",\n    \"Sustainability Enforcement\", \"Trans Fat\", \"Food Establishment\",\n    \"Sewer Maintenance\", \"Bike Rack Condition\", \"Construction Lead Dust\"\n  )\n)\n\n# Create a long-format data frame\ncomplaint_mapping_df &lt;- data.frame(\n  complaint_type = unlist(complaint_category_mapping),\n  category = rep(names(complaint_category_mapping), \n                 sapply(complaint_category_mapping, length)),\n  stringsAsFactors = FALSE\n)\nrownames(complaint_mapping_df) &lt;- NULL\nmap_complaint_to_category &lt;- function(complaint_type) {\n  for (category in names(complaint_category_mapping)) {\n    if (complaint_type %in% complaint_category_mapping[[category]]) {\n      return(category)\n    }\n  }\n  return(\"Others / Miscellaneous\")\n}\n\n# Apply the mapping to create complaint_bucket column\ndf_clean_final &lt;- df_clean_final |&gt;\n  mutate(complaint_bucket = sapply(complaint_type, map_complaint_to_category))\n\ncomplaint_bucket_counts &lt;- df_clean_final |&gt;\n  count(complaint_bucket, sort = TRUE)\n\ncomplaint_bucket_borough &lt;- df_clean_final |&gt;\n  group_by(borough, complaint_bucket) |&gt;\n  summarise(count = n(), .groups = \"drop\") |&gt;\n  group_by(borough) |&gt;\n  mutate(\n    total_borough = sum(count),\n    proportion = count / total_borough * 100\n  ) |&gt;\n  ungroup()\nprint(complaint_bucket_borough)\n\n\n# A tibble: 50 × 5\n   borough complaint_bucket                       count total_borough proportion\n   &lt;chr&gt;   &lt;chr&gt;                                  &lt;int&gt;         &lt;int&gt;      &lt;dbl&gt;\n 1 BRONX   Buildings and Housing                 152187       1365908      11.1 \n 2 BRONX   Heat/Water/Gas Issues                 280270       1365908      20.5 \n 3 BRONX   Noise Related                         354903       1365908      26.0 \n 4 BRONX   Others / Miscellaneous                105631       1365908       7.73\n 5 BRONX   Pests and Animals                      14932       1365908       1.09\n 6 BRONX   Public Safety / Crime / Quality of L…  32185       1365908       2.36\n 7 BRONX   Sanitation and Waste                  107341       1365908       7.86\n 8 BRONX   Street and Traffic Conditions          49349       1365908       3.61\n 9 BRONX   Utilities and Power                    28127       1365908       2.06\n10 BRONX   Vehicle and Parking                   240983       1365908      17.6 \n# ℹ 40 more rows\nCode\n# prepare plot data: percent label and reorder within each borough\nlibrary(forcats)\nlibrary(scales)\nlibrary(tidytext)\nplot_df &lt;- complaint_bucket_borough |&gt;\n  mutate(prop_label = paste0(round(proportion, 1), \"%\"),\n         complaint_bucket = reorder_within(complaint_bucket, proportion, borough, fun = max))\n\n# Cleveland dot-plot showing proportion (%) and ordered by highest per borough\nggplot(plot_df, aes(x = proportion, y = complaint_bucket)) +\n  geom_segment(aes(x = 0, xend = proportion, yend = complaint_bucket),\n               color = \"gray80\") +\n  geom_point(aes(color = borough), size = 2) +\n\n  facet_wrap(~ borough, scales = \"free_y\", ncol = 2) +\n  scale_x_continuous(labels = function(x) paste0(x, \"%\")) +\n  scale_y_reordered() +\n  scale_color_brewer(palette = \"Set2\") +\n  theme_minimal() +\n  theme(\n    legend.position = \"none\",\n    axis.text.x = element_text(size = 7),\n    axis.text.y = element_text(size = 8),\n    plot.margin = margin(5, 30, 5, 5) # room for labels\n  ) +\n  labs(\n    title = \"Complaint Categories by Borough (Cleveland dot plot)\",\n    subtitle = \"Proportion of complaints by category within each borough\",\n    x = \"Proportion (%)\",\n    y = \"Complaint Category\"\n  ) +\n  coord_cartesian(clip = \"off\")",
    "crumbs": [
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>Results</span>"
    ]
  },
  {
    "objectID": "results_hardik.html#how-does-each-year-complaint-evolve",
    "href": "results_hardik.html#how-does-each-year-complaint-evolve",
    "title": "3  Results",
    "section": "3.2 How does each year complaint evolve?",
    "text": "3.2 How does each year complaint evolve?\n\n\nCode\n# Prepare alluvial data\ndf_viz &lt;- df_clean_final %&gt;%\n  mutate(\n    year = year(created_date),\n    month = floor_date(created_date, \"month\"),\n    status_clean = ifelse(status == \"\", NA, status)\n  )\n\ndf_alluvial &lt;- df_viz |&gt;\n  filter(!is.na(status_clean)) |&gt;\n  count(year, complaint_bucket, status_clean)\n\n# Alluvial Plot\nggplot(\n  df_alluvial,\n  aes(\n    axis1 = year,\n    axis2 = complaint_bucket,\n    axis3 = status_clean,\n    y = n\n  )\n) +\n  geom_alluvium(aes(fill = complaint_bucket), width = 1/10, alpha = 0.8) +\n  geom_stratum(width = 1/10) +\n  geom_label(\n    stat = \"stratum\",\n    aes(label = after_stat(stratum)),\n    size = 3,\n    fill = \"white\"\n  ) +\n  scale_x_discrete(\n    limits = c(\"Year\", \"Complaint Type\", \"Status\"),\n    expand = c(.05, .05)\n  ) +\n  labs(\n    title = \"Complaint Flow: Year → Complaint Type → Final Status\",\n    subtitle = \"How complaints evolve from originating year to type to closure state\",\n    y = \"Number of Complaints\",\n    x = \"\"\n  ) +\n  theme_minimal(base_size = 13) +\n  theme(\n    legend.position = \"none\",\n    plot.title = element_text(face = \"bold\"),\n    axis.text.x = element_text(face = \"bold\")\n  )",
    "crumbs": [
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>Results</span>"
    ]
  },
  {
    "objectID": "results_hardik.html#what-is-the-distribution-of-resolution-times-across-agencies",
    "href": "results_hardik.html#what-is-the-distribution-of-resolution-times-across-agencies",
    "title": "3  Results",
    "section": "3.3 What is the distribution of resolution times across agencies?",
    "text": "3.3 What is the distribution of resolution times across agencies?\n\n\nCode\nlibrary(dplyr)\nlibrary(ggplot2)\nlibrary(lubridate)\n\n# Calculate resolution time\ndf_clean &lt;- df_clean_final |&gt;\n  mutate(\n    created_date = as.POSIXct(created_date),\n    closed_date = as.POSIXct(closed_date),\n    resolution_time_days = as.numeric(difftime(closed_date, created_date, units = \"days\"))\n  ) |&gt;\n  filter(!is.na(resolution_time_days), resolution_time_days &gt;= 0)\n\n# Top 15 agencies by complaint volume\ntop_agencies &lt;- df_clean |&gt;\n  count(agency_name) |&gt;\n  slice_max(n, n = 15) |&gt;\n  pull(agency_name)\n\n# Boxplot: resolution time by agency\ndf_clean |&gt;\n  filter(agency_name %in% top_agencies) |&gt;\n  mutate(agency_name = reorder(agency_name, resolution_time_days, FUN = median)) |&gt;\n  ggplot(aes(x = agency_name, y = resolution_time_days)) +\n  geom_boxplot(fill = \"steelblue\", alpha = 0.7, outlier.alpha = 0.3) +\n  coord_flip() +\n  scale_y_continuous(limits = c(0, quantile(df_clean$resolution_time_days, 0.95, na.rm = TRUE))) +\n  labs(\n    title = \"Resolution Time Distribution by Agency (Top 15)\",\n    subtitle = \"Median, quartiles, and outliers shown\",\n    x = \"Agency\",\n    y = \"Resolution Time (Days)\"\n  ) +\n  theme_minimal(base_size = 13) +\n  theme(\n    legend.position = \"none\",\n    plot.title = element_text(face = \"bold\")\n  )",
    "crumbs": [
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>Results</span>"
    ]
  },
  {
    "objectID": "results_hardik.html#how-do-complaint-trends-vary-across-months-in-2023-and-2024",
    "href": "results_hardik.html#how-do-complaint-trends-vary-across-months-in-2023-and-2024",
    "title": "3  Results",
    "section": "3.4 How do complaint trends vary across months in 2023 and 2024?",
    "text": "3.4 How do complaint trends vary across months in 2023 and 2024?\n\n\nCode\ncomplaints &lt;- df_clean_final %&gt;%\n  mutate(\n    year = year(created_date),\n    month = month(created_date, label = TRUE, abbr = TRUE),  # Jan, Feb, etc.\n    month_num = month(created_date),  # 1, 2, 3, etc.\n    year_month = floor_date(created_date, \"month\")  # First day of each month\n  )\ncomplaints_summary &lt;- complaints %&gt;%\n  filter(!is.na(year)) %&gt;%    \n  group_by(year, month, month_num) %&gt;%\n  summarise(total_complaints = n(), .groups = \"drop\") %&gt;%\n  arrange(year, month_num)\n\n\nplot3 &lt;- ggplot(complaints_summary, \n                aes(x = month_num, y = total_complaints, \n                    color = factor(year), group = year)) +\n  geom_line(size = 1.2) +\n  geom_point(size = 3) +\n  scale_x_continuous(breaks = 1:12, labels = month.abb) +\n  scale_y_continuous(\n    limits = c(220000, 320000),\n    breaks = seq(220000, 320000, by = 10000),\n    labels = scales::comma\n  ) +\n  scale_color_brewer(palette = \"Dark2\", name = \"Year\") +\n  labs(\n    title = \"Complaint Trends Across Months\",\n    subtitle = \"Monthly comparison of complaints in 2023 and 2024\",\n    x = \"Month\",\n    y = \"Total Complaints\"\n  ) +\n  theme(\n    panel.grid.major = element_blank(),\n    panel.grid.minor = element_blank(),\n    panel.background = element_blank(),\n    plot.title = element_text(face = \"bold\", size = 16),\n    axis.line = element_line(color = \"black\"),\n    axis.text.x = element_text(angle = 45, hjust = 1),\n    legend.position = \"top\"\n  )\nprint(plot3)\n\n\n\n\n\n\n\n\n\n\n\nCode\nlibrary(maps)\nlibrary(ggplot2)\nlibrary(dplyr)\nlibrary(zipcodeR)\n\n# Load NY state and county map data\nstates &lt;- map_data(\"state\")\ncounties &lt;- map_data(\"county\")\n\n# Filter for New York\nnew_york &lt;- subset(states, region == \"new york\")\nnew_york_county &lt;- subset(counties, region == \"new york\")\n\n# Get all NY ZIP codes with their associated data (including lat/lng)\nny_zipcodes &lt;- search_state('NY')\n\n# Join df_clean_final with the full ZIP code data\ndf_with_cities &lt;- df_clean_final %&gt;%\n  left_join(\n    ny_zipcodes %&gt;% select(zipcode, major_city, lat, lng),\n    by = c(\"incident_zip\" = \"zipcode\")\n  )\n\n# Aggregate complaint counts by major_city\ncity_complaints &lt;- df_with_cities %&gt;%\n  filter(!is.na(major_city)) %&gt;%\n  group_by(major_city) %&gt;%\n  summarise(\n    complaint_count = n(),\n    lat = first(lat),      # Get latitude from zipcodeR data\n    lng = first(lng)       # Get longitude from zipcodeR data\n  ) %&gt;%\n  arrange(desc(complaint_count))\n\n# Create NY map with counties and city points\nny_map &lt;- ggplot(data = new_york, mapping = aes(x = long, y = lat, group = group)) + \n  coord_fixed(1.3) + \n  geom_polygon(color = \"black\", fill = \"gray90\") + \n  geom_polygon(data = new_york_county, fill = NA, color = \"white\") + \n  geom_polygon(color = \"black\", fill = NA) + \n  # Add city points sized by complaint count\n  geom_point(\n    data = city_complaints, \n    aes(x = lng, y = lat, size = complaint_count, group = NULL),\n    color = \"red\", \n    alpha = 0.6\n  ) +\n  scale_size_continuous(\n    name = \"Complaint Count\",\n    range = c(1, 10)\n  ) +\n  ggtitle(\"New York Map - Complaints by Major City\") + \n  theme(\n    axis.title.x = element_blank(), \n    axis.text.x = element_blank(), \n    axis.ticks.x = element_blank(),\n    axis.title.y = element_blank(), \n    axis.text.y = element_blank(), \n    axis.ticks.y = element_blank()\n  )\n\nprint(ny_map)\n\n\n\n\n\n\n\n\n\nCode\n# View top cities by complaint count\nhead(city_complaints, 10)\n\n\n# A tibble: 10 × 4\n   major_city    complaint_count   lat   lng\n   &lt;chr&gt;                   &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt;\n 1 Brooklyn              2034259  40.7 -74.0\n 2 New York              1378757  40.7 -74.0\n 3 Bronx                 1361056  40.8 -73.9\n 4 Staten Island          248200  40.6 -74.1\n 5 Jamaica                169021  40.7 -73.8\n 6 Astoria                122885  40.8 -73.9\n 7 Flushing               109955  40.8 -73.8\n 8 Ridgewood               86770  40.7 -73.9\n 9 Corona                  67699  40.8 -73.8\n10 Fresh Meadows           65316  40.7 -73.8\n\n\n\n\nCode\nny_map &lt;- ggplot(data = new_york, mapping = aes(x = long, y = lat, group = group)) + \n  coord_fixed(1.3) + \n  geom_polygon(color = \"black\", fill = \"gray90\") + \n  geom_polygon(data = new_york_county, fill = NA, color = \"white\") + \n  geom_polygon(color = \"black\", fill = NA) + \n  # Add city points sized by complaint count\n  geom_point(\n    data = city_complaints, \n    aes(x = lng, y = lat, size = complaint_count, group = NULL),\n    color = \"red\", \n    alpha = 0.6\n  ) +\n  scale_size_continuous(\n    name = \"Complaint Count\",\n    range = c(1, 10)  # Adjust size range as needed\n  ) +\n  ggtitle(\"New York Map - Complaints by Major City\") + \n  theme(\n    axis.title.x = element_blank(), \n    axis.text.x = element_blank(), \n    axis.ticks.x = element_blank(),\n    axis.title.y = element_blank(), \n    axis.text.y = element_blank(), \n    axis.ticks.y = element_blank()\n  )\n\nprint(ny_map)\n\n\n\n\n\n\n\n\n\nCode\n# View top cities by complaint count\nhead(city_complaints, 10)\n\n\n# A tibble: 10 × 4\n   major_city    complaint_count   lat   lng\n   &lt;chr&gt;                   &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt;\n 1 Brooklyn              2034259  40.7 -74.0\n 2 New York              1378757  40.7 -74.0\n 3 Bronx                 1361056  40.8 -73.9\n 4 Staten Island          248200  40.6 -74.1\n 5 Jamaica                169021  40.7 -73.8\n 6 Astoria                122885  40.8 -73.9\n 7 Flushing               109955  40.8 -73.8\n 8 Ridgewood               86770  40.7 -73.9\n 9 Corona                  67699  40.8 -73.8\n10 Fresh Meadows           65316  40.7 -73.8",
    "crumbs": [
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>Results</span>"
    ]
  }
]