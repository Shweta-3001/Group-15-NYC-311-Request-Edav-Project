[
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "NYC 311 Service Requests Analysis",
    "section": "",
    "text": "1 Introduction\nNew York City is a bustling metropolis with a diverse range of services and systems that keep the city running smoothly. However, with such complexity, residents may inevitably encounter issues that require government intervention. Data pertaining to the time, location, and content of thousands of 311 calls in New York City is recorded every day. By studying trends in this data, government agencies can respond more effectively to non-emergency requests and issues raised by the populations they serve",
    "crumbs": [
      "<span class='chapter-number'>1</span>  <span class='chapter-title'>Introduction</span>"
    ]
  },
  {
    "objectID": "data.html",
    "href": "data.html",
    "title": "2  Data",
    "section": "",
    "text": "2.1 Description",
    "crumbs": [
      "<span class='chapter-number'>2</span>  <span class='chapter-title'>Data</span>"
    ]
  },
  {
    "objectID": "data.html#missing-value-analysis",
    "href": "data.html#missing-value-analysis",
    "title": "2  Data",
    "section": "2.2 Missing value analysis",
    "text": "2.2 Missing value analysis\n\n\nCode\nlibrary(dplyr)\nlibrary(tidyr)\nlibrary(ggplot2)\nlibrary(stringr)\n\n\n\n\nCode\n# library(RSocrata)\n# library(dplyr)\n\n# options(timeout = 600)\n\n# base_url &lt;- \"https://data.cityofnewyork.us/resource/erm2-nwe9.json\"\n\n# get_month_data &lt;- function(year, month) {\n#   start &lt;- sprintf(\"%d-%02d-01T00:00:00\", year, month)\n#   # end = first day of next month\n#   if (month == 12) {\n#     end &lt;- sprintf(\"%d-01-01T00:00:00\", year + 1)\n#   } else {\n#     end &lt;- sprintf(\"%d-%02d-01T00:00:00\", year, month + 1)\n#   }\n\n#   url &lt;- sprintf(\n#     \"%s?$where=created_date &gt;= '%s' AND created_date &lt; '%s'\",\n#     base_url, start, end\n#   )\n#   message(\"Fetching: \", start, \" to \", end)\n#   read.socrata(url)\n# }\n\n# # Example: all months of 2023\n# months &lt;- 1:12\n# list_2023 &lt;- lapply(months, function(m) get_month_data(2023, m))\n# data_2023 &lt;- bind_rows(list_2023)\n# list_2024 &lt;- lapply(months, function(m) get_month_data(2024, m))\n# data_2024 &lt;- bind_rows(list_2024)\n# combined &lt;- rbind(data_2023,data_2024)\n# saveRDS(combined, \"nyc_311_data.rds\")\n\n\n\n\nCode\ncombined=combined &lt;- readRDS(\"nyc_311_data.rds\")\n\n\n\n\nCode\nmissing_values_summary &lt;- colSums(is.na(combined))\nmissing_columns &lt;- missing_values_summary[missing_values_summary &gt; 0]\nmissing_table &lt;- data.frame(\n  Column = names(missing_columns),\n  MissingCount = as.numeric(missing_columns)\n)\nsorted_table &lt;- missing_table |&gt;\narrange(desc(MissingCount))\nprint(sorted_table)\n\n\n                           Column MissingCount\n1            taxi_company_borough      6679852\n2                       road_ramp      6668175\n3        bridge_highway_direction      6660223\n4                        due_date      6651779\n5             bridge_highway_name      6639447\n6          bridge_highway_segment      6639437\n7           taxi_pick_up_location      6611318\n8                    vehicle_type      6504338\n9                   facility_type      6199357\n10                       landmark      2652950\n11          intersection_street_1      2180001\n12          intersection_street_2      2176719\n13                 cross_street_1      1903203\n14                 cross_street_2      1902070\n15                  location_type       800974\n16                            bbl       752073\n17                           city       325436\n18                    street_name       244008\n19               incident_address       243812\n20                    closed_date       133656\n21                       latitude       102706\n22                      longitude       102706\n23              location.latitude       102706\n24             location.longitude       102706\n25         location.human_address       102706\n26       x_coordinate_state_plane       102597\n27       y_coordinate_state_plane       101804\n28         resolution_description        93259\n29                     descriptor        78842\n30                   incident_zip        72906\n31 resolution_action_updated_date        37625\n32                   address_type        30391\n33                   created_date            1\n\n\n\n\nCode\nmiss_by_col_all &lt;- combined |&gt;\n  summarise(across(everything(), \\(x) sum(is.na(x)))) |&gt;\n  pivot_longer(everything(), names_to = \"column\", values_to = \"missing_n\") |&gt;\n  mutate(total_n = nrow(combined),\n         missing_rate = missing_n / total_n) |&gt;\n  dplyr::arrange(desc(missing_n))\n\ntop_missing_rate &lt;- miss_by_col_all |&gt;\nslice_max(missing_rate, n = 25)\n\nggplot(top_missing_rate, aes(x = reorder(column, missing_rate), y = missing_rate)) +\n  geom_col() +\n  coord_flip() +\n  labs(\n    title = \"Top columns by missingness rate (pre-selection)\",\n    x = NULL,\n    y = \"Missingness rate\"\n  )\n\n\n\n\n\n\n\n\n\nCode\nmissing_threshold &lt;- 0.60\ncols_to_drop_by_missing &lt;- miss_by_col_all |&gt;\n  filter(missing_rate &gt; missing_threshold) |&gt;\n  pull(column)\nprint(cols_to_drop_by_missing)\n\n\n[1] \"taxi_company_borough\"     \"road_ramp\"               \n[3] \"bridge_highway_direction\" \"due_date\"                \n[5] \"bridge_highway_name\"      \"bridge_highway_segment\"  \n[7] \"taxi_pick_up_location\"    \"vehicle_type\"            \n[9] \"facility_type\"           \n\n\nThe above horizontal bar graph gives a relative view of missing values in all the columns of the dataset. Missing values can, of course, complicate the analysis; however, in our case, the columns with a high number of missing values are not critical to our primary objectives. The data in these columns—such as taxi_company_borough, road_ramp,bridge_highway_direction, bridge_highway_name bridge_highway_segment,taxi_pick_up_location,vehicle_type,facility_type as supporting information rather than core data required for analysis.\nFor example, columns like bridge_highway_direction only provides metadata about the bridge highway, which is not directly related to analyzing 311 trends . Thus, we can safely drop these columns without significantly impacting our analysis.\n\n\nCode\nset.seed(42)\nsampled_data &lt;- combined[sample(1:nrow(combined), 5000), ]\n\nmissing_long &lt;- as.data.frame(is.na(sampled_data)) |&gt;\n  pivot_longer(cols = everything(), names_to = \"Column\", values_to = \"IsMissing\")\n\nmissing_long &lt;- cbind(RowIndex = rep(1:nrow(sampled_data), times = ncol(sampled_data)), missing_long)\n\n# Plotting heatmap of missing data\nggplot(missing_long, aes(x = Column, y = RowIndex, fill = IsMissing)) +\n  geom_tile() +\n  scale_fill_manual(values = c(\"FALSE\" = \"white\", \"TRUE\" = \"red\"), name = \"Missing\") +\n  labs(title = \"Heatmap of Missing Data (Sampled Rows)\",\n       x = \"Columns\",\n       y = \"Row Index\") +\n  theme_minimal() +\n  theme(axis.text.x = element_text(angle = 90, hjust = 1))\n\n\n\n\n\n\n\n\n\nThe above missing value heatmap shows that missing data is concentrated only in certain columns. The rest of the columns have little to no missing data. This helps us streamline the data cleaning process.\n\n2.2.1 Data Cleaning\nBased on our results above we have decided to remove following columns from our data-set as they are either not useful to us or have a lot of missing values.\nThe columns that we are dropping: taxi_company_borough, road_ramp,bridge_highway_direction, bridge_highway_name, bridge_highway_segment,taxi_pick_up_location,vehicle_type,facility_type, due to high missing values and low relevance to our analysis.\n\n\nCode\ndf_clean &lt;- combined |&gt;\n  dplyr::select(\n    unique_key, created_date, closed_date, resolution_action_updated_date,\n    agency, agency_name, complaint_type, descriptor, status,\n    borough, city, incident_zip, incident_address,\n    latitude, longitude, location_type,\n    open_data_channel_type,\n    resolution_description\n  )",
    "crumbs": [
      "<span class='chapter-number'>2</span>  <span class='chapter-title'>Data</span>"
    ]
  }
]